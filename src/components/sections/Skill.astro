---
import Section from "@/components/Section.astro";
import HTML from "../icons/Html.astro";
import CSS from "../icons/Css.astro";
import JavaScript from "../icons/JavaScript.astro";
import NodeJs from "../icons/NodeJs.astro";
import MySQL from "../icons/Sql.astro";
import Firebase from "../icons/Firebase.astro";
import MongoDb from "../icons/MongoDb.astro";
import React from "../icons/React.astro";
import ReactNative from "../icons/ReactNative.astro";
import Git from "../icons/Git.astro";
import GitHub from "../icons/Github.astro";
import Tailwind from "../icons/Tailwind.astro";
import Claude from "../icons/Claude.astro";
import AstroIcon from "../icons/Astro.astro";
import { skills } from "@cv";

const SKILLS_ICONS: Record<string, any> = {
  HTML,
  CSS,
  JavaScript,
  React,
  ReactNative,
  NodeJs,
  MySQL,
  Firebase,
  MongoDb,
  Git,
  GitHub,
  Tailwind,
  SQL: MySQL,
  PostgreSQL: MySQL,
  Express: NodeJs,
  Python: NodeJs,
  NextJS: React,
  Vite: React,
  Playwright: React,
  Vitest: React,
  Vercel: GitHub,
  Astro: AstroIcon,
  Claude: Claude,
  "Claude API": Claude,
  "AI Agents": Claude,
  "Prompt Engineering": Claude,
};

// Títulos de categorías
const categoryTitles: Record<string, string> = {
  aiAgents: 'AI & Agents',
  frontend: 'Frontend',
  backend: 'Backend',
  tools: 'Tools & DevOps',
  databases: 'Databases',
  versionControl: 'Version Control',
  testing: 'Testing',
  deployment: 'Deployment',
};
---

<Section title="Habilidades Técnicas" id="skills">
  <div class="skills-container">
    {Object.entries(skills).map(([category, skillList], index) => {
      const formattedCategory = categoryTitles[category] || category
        .replace(/([A-Z])/g, " $1")
        .trim()
        .replace(/^./, (c) => c.toUpperCase());

      const isHighlighted = category === 'aiAgents';

      return (
        <div class={`skill-category ${isHighlighted ? 'highlighted' : ''}`}>
          <h3 class="category-title">{formattedCategory}</h3>
          <div class="skills-list">
            {skillList.map((name) => {
              const Icon = SKILLS_ICONS[name];
              const displayName = name === "ReactNative" ? "React Native" :
                                 name === "NodeJs" ? "Node.js" :
                                 name === "NextJS" ? "Next.js" :
                                 name;

              return (
                <div class="skill-badge">
                  {Icon && <Icon class="skill-icon" />}
                  <span class="skill-name">{displayName}</span>
                </div>
              );
            })}
          </div>
        </div>
      );
    })}
  </div>
</Section>

<style>
  .skills-container {
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
    margin-top: 1.5rem;
  }

  .skill-category {
    display: flex;
    flex-direction: column;
    gap: 0.75rem;
  }

  /* Categoría destacada (AI & Agents) */
  .skill-category.highlighted {
    padding: 1rem;
    background: linear-gradient(135deg, var(--color-primary-50), var(--color-accent-50));
    border: 1px solid var(--color-primary-200);
    border-radius: var(--radius-lg);
  }

  :global(.dark) .skill-category.highlighted {
    background: linear-gradient(135deg, rgba(139, 92, 246, 0.1), rgba(6, 182, 212, 0.1));
    border-color: var(--color-primary-900);
  }

  .category-title {
    font-size: 0.875rem;
    font-weight: var(--font-weight-semibold);
    color: var(--color-text-secondary);
    text-transform: uppercase;
    letter-spacing: 0.05em;
    margin: 0;
  }

  .skill-category.highlighted .category-title {
    color: var(--color-primary-700);
    font-size: 0.9375rem;
  }

  :global(.dark) .skill-category.highlighted .category-title {
    color: var(--color-primary-300);
  }

  .skills-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
  }

  .skill-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 0.875rem;
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border);
    border-radius: var(--radius-full);
    font-size: 0.875rem;
    font-weight: var(--font-weight-medium);
    color: var(--color-text);
    transition: all var(--transition-base);
  }

  .skill-badge:hover {
    border-color: var(--color-neutral-400);
    background: var(--color-bg);
    transform: translateY(-1px);
  }

  :global(.dark) .skill-badge {
    background: var(--color-neutral-900);
    border-color: var(--color-neutral-800);
  }

  :global(.dark) .skill-badge:hover {
    border-color: var(--color-neutral-600);
    background: var(--color-neutral-800);
  }

  /* Badges destacados en categoría highlighted */
  .skill-category.highlighted .skill-badge {
    background: white;
    border-color: var(--color-primary-300);
  }

  :global(.dark) .skill-category.highlighted .skill-badge {
    background: var(--color-neutral-900);
    border-color: var(--color-primary-800);
  }

  .skill-category.highlighted .skill-badge:hover {
    border-color: var(--color-primary-500);
    box-shadow: 0 2px 8px rgba(139, 92, 246, 0.2);
  }

  .skill-icon {
    width: 18px;
    height: 18px;
    flex-shrink: 0;
  }

  .skill-name {
    line-height: 1;
  }

  /* Responsive */
  @media (max-width: 640px) {
    .skill-badge {
      padding: 0.375rem 0.75rem;
      font-size: 0.8125rem;
    }

    .skill-icon {
      width: 16px;
      height: 16px;
    }

    .skill-category.highlighted {
      padding: 0.75rem;
    }
  }
</style>